webpackJsonp([1],{"+coZ":function(e,t){},0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){},"7Otq":function(e,t,s){e.exports=s.p+"static/img/logo.eedf32d.png"},"8fg3":function(e,t){},EGGR:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")({name:"App"},r,!1,function(e){s("br41")},null,null).exports,i=s("/ocq"),n={name:"login",mounted:function(){this.$cookies.isKey("userId")&&this.$router.push("/")},methods:{login:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s={email:t.logInForm.email,password:t.logInForm.password};t.$http.post("/MyCourses/login",s).then(function(e){console.log(e.data),"NOT_EXIST"===e.data.result?t.$message.error("该用户不存在或密码输入错误"):"SUCCESS"===e.data.result?(t.$cookies.set("userId",e.data.userId,"15MIN"),t.$cookies.set("userType",e.data.userType,"15MIN"),t.$cookies.set("email",s.email.substring(0,s.email.indexOf("@")),"15MIN"),t.$router.push("/")):(t.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+e.data.result))},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},register:function(e){var t=this;this.$refs[e].validate(function(s){if(!s)return!1;var a={userType:t.registerForm.userType,email:t.registerForm.email,name:t.registerForm.newName,password:t.registerForm.pwd,studentId:t.registerForm.studentId};t.$http.post("/MyCourses/register",a).then(function(s){"EXIST"===s.data?t.$message.warning("该邮箱已被注册"):"SUCCESS"===s.data?(t.$message.success("注册成功"),t.$refs[e].resetFields(),t.isLogIn=!0):(t.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+s.data))},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},toRegister:function(){this.isLogIn=!1},toLogin:function(){this.isLogIn=!0}},data:function(){var e=this;return{isLogIn:!0,logInForm:{email:"",password:""},logInRules:{email:[{required:!0,message:"请输入完整NJU邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},registerForm:{email:"",pwd:"",checkPassword:"",newName:"",studentId:"",userType:""},registerRules:{email:[{validator:function(e,t,s){console.log("validate email"),""===t?s(new Error("请输入完整NJU邮箱")):t.match(/^[a-zA-Z0-9]+@smail.nju.edu.cn$/)?s():s(new Error("邮箱格式不符!"))},trigger:"blur"}],pwd:[{validator:function(t,s,a){console.log("validate pwd"),""===s?a(new Error("请输入密码")):""!==e.registerForm.checkPassword&&e.$refs.registerForm.validateField("checkPassword"),a()},trigger:"change"}],checkPassword:[{validator:function(t,s,a){console.log("validate checkPassword"),""===s?a(new Error("请再次输入密码")):s!==e.registerForm.pwd?a(new Error("两次输入密码不一致!")):a()},trigger:"change"}],userType:[{required:!0,message:"请选择您的身份",trigger:"change"}]}}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"margin-top":"150px"},attrs:{height:"100px"}},[a("img",{attrs:{src:s("7Otq")}})]),e._v(" "),a("el-main",[e.isLogIn?a("el-form",{ref:"logInForm",staticClass:"login-wrap",attrs:{model:e.logInForm,rules:e.logInRules}},[a("h3",[e._v("登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{staticClass:"input",attrs:{type:"text",placeholder:"NJU邮箱"},model:{value:e.logInForm.email,callback:function(t){e.$set(e.logInForm,"email",t)},expression:"logInForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"密码"},model:{value:e.logInForm.password,callback:function(t){e.$set(e.logInForm,"password",t)},expression:"logInForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.login("logInForm")}}},[e._v("登录")])],1),e._v(" "),a("span",{staticClass:"span",on:{click:e.toRegister}},[e._v("没有账号？马上注册")])],1):a("el-form",{ref:"registerForm",staticClass:"register-wrap",attrs:{model:e.registerForm,rules:e.registerRules,"label-width":"100px"}},[a("h3",[e._v("注册")]),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{staticClass:"input",attrs:{type:"text",placeholder:"必须为NJU邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[a("el-input",{staticClass:"input",attrs:{type:"password",autocomplete:"off"},model:{value:e.registerForm.pwd,callback:function(t){e.$set(e.registerForm,"pwd",t)},expression:"registerForm.pwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"newName"}},[a("el-input",{staticClass:"input",attrs:{type:"text"},model:{value:e.registerForm.newName,callback:function(t){e.$set(e.registerForm,"newName",t)},expression:"registerForm.newName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学号",prop:"studentId"}},[a("el-input",{staticClass:"input",attrs:{type:"text"},model:{value:e.registerForm.studentId,callback:function(t){e.$set(e.registerForm,"studentId",t)},expression:"registerForm.studentId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{staticClass:"input",attrs:{type:"password",autocomplete:"off"},model:{value:e.registerForm.checkPassword,callback:function(t){e.$set(e.registerForm,"checkPassword",t)},expression:"registerForm.checkPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份",prop:"userType"}},[a("el-radio-group",{model:{value:e.registerForm.userType,callback:function(t){e.$set(e.registerForm,"userType",t)},expression:"registerForm.userType"}},[a("el-radio-button",{attrs:{label:"student"}},[e._v("学生")]),e._v(" "),a("el-radio-button",{attrs:{label:"teacher"}},[e._v("教师")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.register("registerForm")}}},[e._v("注册")])],1),e._v(" "),a("span",{staticClass:"span",on:{click:e.toLogin}},[e._v("已有账号？马上登录")])],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(n,l,!1,function(e){s("g8QD")},null,null).exports,d={data:function(){return{name:"tourist"}},mounted:function(){if(this.$cookies.isKey("userId"))switch(this.$cookies.get("userType")){case"Student":this.$router.push("/MyClasses");break;case"Teacher":this.$router.push("/TeacherCourses");break;case"Admin":this.$router.push("/review");break;default:this.$message.error("网络错误，请刷新或稍后再试"),console.log("未知用户类型："+this.$cookies.get("userType"))}else this.$router.push("/login")},methods:{}},u={render:function(){var e=this.$createElement;return(this._self._c||e)("el-container")},staticRenderFns:[]};var m=s("VU/8")(d,u,!1,function(e){s("EGGR")},"data-v-003e226c",null).exports,p=s("BO1k"),f=s.n(p),h={name:"MyClasses",mounted:function(){var e=this;this.$cookies.isKey("userId")?this.$http.get("/MyCourses/MyClasses",{params:{userId:this.$cookies.get("userId")}}).then(function(t){"SUCCESS"===t.data.result?e.myClasses=t.data.myClasses:e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")}):this.$router.push("/login")},methods:{pre2:function(e){return(Array(2).join("0")+e).slice(-2)},dateTime:function(e){var t=e.length>=6?e[5]:0;return e[0]+"年"+e[1]+"月"+e[2]+"日 "+e[3]+":"+this.pre2(e[4])+":"+this.pre2(t)},clickClass:function(e){var t=this;this.$http.get("/MyCourses/class",{params:{userId:this.userId,classId:e}}).then(function(e){console.log(e.data),"SUCCESS"===e.data.result?(t.classInfo=e.data.classInfo,t.isProfile=!1):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})},toProfile:function(){this.isProfile=!0},clickCourseware:function(e,t){var s=this;this.$http.get("/MyCourses/downloadCourseware",{params:{coursewareId:e},responseType:"blob"}).then(function(e){if(console.log(e),e){var s=window.URL.createObjectURL(e.data),a=document.createElement("a");a.style.display="none",a.href=s,a.setAttribute("download",t),document.body.appendChild(a),a.click()}},function(){s.$message.error("网络错误，请刷新或稍后再试")})},quitClass:function(e){var t=this;this.$confirm("是否确定退选该课程?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post("/MyCourses/cancelClassSelection",{classId:e,studentId:t.userId}).then(function(s){"SUCCESS"===s.data?(t.$message.success("退课成功！"),t.myClasses=t.myClasses.filter(function(t){return t.classId!==e}),t.isProfile=!0):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},beforeHomeworkUpload:function(e){var t=!0,s=!1,a=void 0;try{for(var r,o=f()(this.classInfo.homework);!(t=(r=o.next()).done);t=!0){var i=r.value;if(i.id===this.activeHomeworkId){console.log(i.typeRestriction),console.log(e.name);var n=0===i.typeRestriction.length||0===i.typeRestriction[0].length||i.typeRestriction.includes(e.name.substring(e.name.indexOf(".")+1)),l=e.size/1024/1024<i.sizeLimit;return n||this.$message.error("上传文件类型只能为"+i.typeRestriction.join("、")+"!"),l||this.$message.error("上传文件大小不能超过"+i.sizeLimit+"MB!"),n&&l}}}catch(e){s=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(s)throw a}}},addPost:function(e,t){var s=this;console.log(this.$refs[e]),this.$refs[e].validate(function(e){if(!e)return!1;var a={userId:s.userId,classId:t,title:s.postForm.title,text:s.postForm.text};s.$http.post("/MyCourses/addPost",a).then(function(e){console.log(e.data),"SUCCESS"===e.data.result?(s.classInfo.posts.push(e.data.post),s.newPostDialogVisible=!1,s.$message.success("发帖成功")):(s.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+e.data.result))},function(){s.$message.error("网络错误，请刷新或稍后再试")})})},addReply:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s={userId:t.userId,postId:t.replyForm.postId,text:t.replyForm.text};t.$http.post("/MyCourses/addReply",s).then(function(e){console.log(e.data),"SUCCESS"===e.data.result?t.classInfo.posts.forEach(function(s){s.id===t.replyForm.postId&&(s.replies.push(e.data.reply),t.newReplyDialogVisible=!1,t.$message.success("回帖成功"))}):(t.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+e.data.result))},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},uploadHomeworkSuccess:function(e){"SUCCESS"===e.result?(this.classInfo.homework.forEach(function(t){t.id===e.homeworkId&&(t.submissionId=e.submissionId)}),this.$message.success("提交作业成功！")):this.$message.error("网络错误，请刷新或稍后再试")},clickHwScores:function(e){var t=this;this.$http.get("/MyCourses/getHomeworkScores",{params:{userId:this.userId,homeworkId:e}}).then(function(s){"SUCCESS"===s.data.result?(t.homeworkScore.id=e,t.homeworkScore.homeworkScores=s.data.homeworkScores,t.homeworkScoresVisible=!0):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})},downloadSubmission:function(e){var t=this;this.$http.get("/MyCourses/downloadSubmission",{params:{submissionId:e},responseType:"blob"}).then(function(e){if(console.log(e),e){var t=window.URL.createObjectURL(e.data),s=document.createElement("a");s.style.display="none",s.href=t;var a=e.headers.map["content-disposition"][0];a=a.substring(a.indexOf("filename=")+9),s.setAttribute("download",a),document.body.appendChild(s),s.click()}},function(){t.$message.error("网络错误，请刷新或稍后再试")})},clickClassScores:function(){var e=this;this.$http.get("/MyCourses/getClassScores",{params:{userId:this.userId,classId:this.classInfo.id}}).then(function(t){"SUCCESS"===t.data.result?(e.classScore.scores=t.data.scores,e.classScore.publishMethod=e.classInfo.publishMethod,e.classScoresVisible=!0):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})}},data:function(){return{name:this.$cookies.get("email"),userId:this.$cookies.get("userId"),isProfile:!0,classScoresVisible:!1,homeworkScoresVisible:!1,newPostDialogVisible:!1,newReplyDialogVisible:!1,activeHomeworkId:"",activePostId:"",postForm:{title:"",text:""},replyForm:{postId:1,text:""},postRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],text:[{required:!0,message:"请输入正文",trigger:"blur"}]},myClasses:[{classId:"1",name:"课程1",homework:[{name:"作业1",deadline:"2019-03-08 23:59:59"},{name:"作业2",deadline:"2019-03-09 23:59:59"}]},{classId:"2",name:"课程2",homework:[]},{classId:"3",name:"课程3"}],classInfo:{id:1,name:"课程1",teacherName:"教师1",grade:1,term:1,classOrder:1,startTime:[2019,3,1],endTime:[2019,6,30],publishMethod:"NOT_YET",coursewares:[{id:1,name:"课件1"},{id:2,name:"课件2"}],homework:[{id:1,name:"作业1",description:"一段描述",deadline:"2019-03-9",submissionId:1,sizeLimit:2,publishMethod:"NOT_YET",typeRestriction:["doc","docx"]},{id:2,name:"作业2",description:"一段描述",deadline:"2019-03-10",submissionId:0,sizeLimit:2,publishMethod:"ONLY_FOR_ME",typeRestriction:["doc","docx"]}],posts:[{id:1,poster:"发帖者1",title:"标题1",text:"正文",time:"2019-03-9",replies:[{id:1,replies:"回帖者1",text:"正文",time:"2019-03-9"},{id:2,replies:"回帖者2",text:"正文",time:"2019-03-10"}]},{id:2,poster:"发帖者2",title:"标题2",text:"正文",time:"2019-03-10",replies:[{id:1,replies:"回帖者1",text:"正文",time:"2019-03-10"}]}]},homeworkScore:{id:0,publishMethod:"",homeworkScores:[{submissionId:1,studentId:"161250042",score:100},{submissionId:2,studentId:"161250040",score:60},{submissionId:0,studentId:"161250039",score:0}]},classScore:{publishMethod:"",scores:[{studentId:1,strId:"161250042",score:100},{studentId:2,strId:"161250040",score:60},{studentId:3,strId:"161250039",score:0}]}}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("student-nav",{attrs:{name:e.name}})],1),e._v(" "),s("el-main",[0===e.myClasses.length?s("div",[e._v("您还没有选上任何课程，可以前往“选课”页面进行选课")]):e._e(),e._v(" "),e._l(e.myClasses,function(t,a){return s("el-card",{directives:[{name:"show",rawName:"v-show",value:e.isProfile,expression:"isProfile"}],key:a,staticClass:"box-card"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.clickClass(t.classId)}}},[e._v(e._s(t.name))])],1),e._v(" "),e._l(t.homework,function(t,a){return s("div",{key:a,staticClass:"text"},[s("i",{staticClass:"el-icon-edit-outline"}),e._v(" "),s("span",{staticClass:"item"},[e._v("尚未提交的作业："+e._s(t.name))]),e._v(" "),s("span",{staticClass:"item"},[e._v("    截止日期："+e._s(e.dateTime(t.deadline)))])])})],2)}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isProfile,expression:"!isProfile"}]},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"class-info-card"},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.classInfo.name))]),e._v(" "),s("div",{staticClass:"left"},[e._v("任课教师："+e._s(e.classInfo.teacherName))]),e._v(" "),s("div",{staticClass:"left"},[e._v("时期：大学"+e._s(e.classInfo.grade)+"年级第"+e._s(e.classInfo.term)+"学期")]),e._v(" "),s("div",{staticClass:"left"},[e._v("班级："+e._s(e.classInfo.classOrder)+"班")]),e._v(" "),s("div",{staticClass:"left"},[e._v("开课时间："+e._s(e.classInfo.startTime[0])+"年"+e._s(e.classInfo.startTime[1])+"月"+e._s(e.classInfo.startTime[2])+"日")]),e._v(" "),s("div",{staticClass:"left"},[e._v("结课时间："+e._s(e.classInfo.endTime[0])+"年"+e._s(e.classInfo.endTime[1])+"月"+e._s(e.classInfo.endTime[2])+"日")]),e._v(" "),s("div",{staticClass:"left"},[e._v("学生人数："+e._s(e.classInfo.number))]),e._v(" "),"NOT_YET"!==e.classInfo.publishMethod?s("div",{staticClass:"left"},[e._v("成绩：已公布\n              "),"ONLY_FOR_ME"===e.classInfo.publishMethod?s("i",[e._v("（仅可查看本人）")]):"FULLY_OPEN"===e.classInfo.publishMethod?s("i",[e._v("（完全公开）")]):e._e()]):e._e()]),e._v(" "),s("el-card",{staticClass:"class-info-card"},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("论坛")]),e._v(" "),s("el-collapse",{model:{value:e.activePostId,callback:function(t){e.activePostId=t},expression:"activePostId"}},e._l(e.classInfo.posts,function(t,a){return s("el-collapse-item",{key:a,attrs:{name:t.id}},[s("template",{slot:"title"},[e._v("标题："+e._s(t.title)+"   "+e._s(e.dateTime(t.time)))]),e._v(" "),s("el-card",{staticStyle:{margin:"5px 5px"}},[s("el-button",{staticStyle:{float:"right",padding:"2px 0"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(s){e.newReplyDialogVisible=!0,e.replyForm.postId=t.id}}},[e._v("回帖\n                  ")]),e._v(" "),s("div",{staticClass:"left"},[e._v("由 "+e._s(t.poster)+" 发帖：")]),e._v(" "),s("div",{staticClass:"left"},[e._v(e._s(t.text))])],1),e._v(" "),e._l(t.replies,function(t,a){return s("el-card",{key:a,staticClass:"class-info-card"},[s("div",{staticClass:"left"},[e._v("由 "+e._s(t.replies)+" 于 "+e._s(e.dateTime(t.time))+" 回帖：")]),e._v(" "),s("div",{staticClass:"left"},[e._v(e._s(t.text))])])})],2)}),1),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px"},on:{click:function(t){e.newPostDialogVisible=!0}}},[e._v("发布新帖子")]),e._v(" "),s("el-dialog",{attrs:{title:"新的帖子",visible:e.newPostDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.newPostDialogVisible=t}}},[s("el-form",{ref:"postForm",staticClass:"post-wrap",attrs:{model:e.postForm,rules:e.postRules}},[s("el-form-item",{attrs:{prop:"title"}},[s("el-input",{staticClass:"input",attrs:{type:"text",placeholder:"标题"},model:{value:e.postForm.title,callback:function(t){e.$set(e.postForm,"title",t)},expression:"postForm.title"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"text"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入正文"},model:{value:e.postForm.text,callback:function(t){e.$set(e.postForm,"text",t)},expression:"postForm.text"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"button",on:{click:function(t){e.newPostDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.addPost("postForm",e.classInfo.id)}}},[e._v("发帖")])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"新的回帖",visible:e.newReplyDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.newReplyDialogVisible=t}}},[s("el-form",{ref:"replyForm",staticClass:"post-wrap",attrs:{model:e.replyForm}},[s("el-form-item",{attrs:{prop:"text",rules:{required:!0,message:"回复内容不能为空",trigger:"blur"}}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入回复内容"},model:{value:e.replyForm.text,callback:function(t){e.$set(e.replyForm,"text",t)},expression:"replyForm.text"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"button",on:{click:function(t){e.newReplyDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.addReply("replyForm")}}},[e._v("回帖")])],1)],1)],1)],1),e._v(" "),s("el-button",{on:{click:e.toProfile}},[e._v("返回")]),e._v(" "),"NOT_YET"!==e.classInfo.publishMethod?s("el-button",{on:{click:e.clickClassScores}},[e._v("查看成绩")]):e._e(),e._v(" "),s("el-button",{on:{click:function(t){e.quitClass(e.classInfo.id)}}},[e._v("退课")]),e._v(" "),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"查看成绩",visible:e.classScoresVisible,center:""},on:{"update:visible":function(t){e.classScoresVisible=t}}},[s("el-table",{attrs:{data:e.classScore.scores,"max-height":"450px","default-sort":{prop:"strId",order:"ascending"},stripe:""}},[s("el-table-column",{attrs:{property:"strId",label:"学号",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{property:"score",label:"成绩",sortable:""}})],1),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px"},on:{click:function(t){e.classScoresVisible=!1}}},[e._v("返回")])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"class-info-card"},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("课件")]),e._v(" "),e._l(e.classInfo.coursewares,function(t,a){return s("div",{key:a,staticClass:"left"},[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.clickCourseware(t.id,t.name)}}},[e._v(e._s(t.name))])],1)})],2),e._v(" "),s("el-card",{staticClass:"class-info-card"},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("作业")]),e._v(" "),s("el-collapse",{attrs:{accordion:""},model:{value:e.activeHomeworkId,callback:function(t){e.activeHomeworkId=t},expression:"activeHomeworkId"}},e._l(e.classInfo.homework,function(t,a){return s("el-collapse-item",{key:a,attrs:{name:t.id}},[s("template",{slot:"title"},[e._v("\n                  "+e._s(t.name)+"   \n                  "),0===t.submissionId?s("i",{staticClass:"el-icon-warning"},[e._v("未提交")]):s("i",{staticClass:"el-icon-check"},[e._v("已提交")])]),e._v(" "),s("div",{staticClass:"left"},[e._v(e._s(t.description))]),e._v(" "),s("div",{staticClass:"left"},[e._v("截止日期："+e._s(e.dateTime(t.deadline)))]),e._v(" "),"NOT_YET"!==t.publishMethod?s("div",{staticClass:"left"},[e._v("成绩已公布\n                  "),"ONLY_FOR_ME"===t.publishMethod?s("i",[e._v("（仅可查看本人）")]):"FULLY_OPEN"===t.publishMethod?s("i",[e._v("（完全公开）")]):e._e()]):e._e(),e._v(" "),"NOT_YET"!==t.publishMethod?s("el-button",{staticStyle:{"margin-top":"16px"},on:{click:function(s){e.clickHwScores(t.id)}}},[e._v("查看作业成绩")]):e._e(),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.submissionId,expression:"homework.submissionId !== 0"}],staticStyle:{"margin-top":"16px"},on:{click:function(s){e.downloadSubmission(t.submissionId)}}},[e._v("下载作业")]),e._v(" "),s("el-upload",{directives:[{name:"show",rawName:"v-show",value:0===t.submissionId,expression:"homework.submissionId === 0"}],staticStyle:{"margin-top":"15px"},attrs:{data:{studentId:e.userId,homeworkId:t.id},action:"/MyCourses/submitHomework","before-upload":e.beforeHomeworkUpload,"on-success":e.uploadHomeworkSuccess,limit:"1",drag:""}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),s("em",[e._v("点击上传")])]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传一个"),t.typeRestriction.length>0&&t.typeRestriction[0].length>0?s("div",[e._v("\n                      "+e._s(t.typeRestriction.join("/")))]):e._e(),e._v("文件，且不超过"+e._s(t.sizeLimit)+"MB\n                  ")])])],2)}),1)],1),e._v(" "),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"作业成绩",visible:e.homeworkScoresVisible,center:""},on:{"update:visible":function(t){e.homeworkScoresVisible=t}}},[s("el-table",{attrs:{data:e.homeworkScore.homeworkScores,"max-height":"450px","default-sort":{prop:"studentId",order:"ascending"},stripe:""}},[s("el-table-column",{attrs:{property:"studentId",label:"学号",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{property:"score",label:"成绩",sortable:""}})],1),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px"},on:{click:function(t){e.homeworkScoresVisible=!1}}},[e._v("返回")])],1)],1)],1)],1)],2)],1)},staticRenderFns:[]};var g=s("VU/8")(h,v,!1,function(e){s("RmUS")},"data-v-b83eebac",null).exports,b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("student-nav",{attrs:{name:e.name}})],1),e._v(" "),s("el-main",[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("选课")]),e._v(" "),s("el-table",{attrs:{data:e.unselectedClass,"default-sort":{prop:"name",order:"ascending"},"max-height":"450px",stripe:""}},[s("el-table-column",{attrs:{prop:"name",label:"课名",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"teacher",label:"教师",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"grade",label:"年级",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"term",label:"学期",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"classOrder",label:"班级",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"startTime",label:"开课时间",formatter:e.startDateFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"endTime",label:"结课时间",formatter:e.endDateFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"number",label:"已选/限额",formatter:e.numberFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(s){s.preventDefault(),e.clickSelectClass(t.row)}}},[e._v("选课")])]}}])})],1)],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("已选课程")]),e._v(" "),s("el-table",{attrs:{data:e.selectedClass,"default-sort":{prop:"name",order:"ascending"},"max-height":"450px",stripe:""}},[s("el-table-column",{attrs:{prop:"name",label:"课名",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"teacher",label:"教师",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"grade",label:"年级",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"term",label:"学期",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"classOrder",label:"班级",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"startTime",label:"开课时间",formatter:e.startDateFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"endTime",label:"结课时间",formatter:e.endDateFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"number",label:"已选/限额",formatter:e.numberFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(s){s.preventDefault(),e.clickCancelClassSelection(t.row)}}},[e._v("退选")])]}}])})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var _=s("VU/8")({name:"TakeClasses",mounted:function(){var e=this;this.$cookies.isKey("userId")?this.$http.get("/MyCourses/TakeClasses",{params:{studentId:this.$cookies.get("userId")}}).then(function(t){"SUCCESS"===t.data.result?(e.selectedClass=t.data.selectedClass,e.unselectedClass=t.data.unselectedClass):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")}):this.$router.push("/login")},methods:{clickSelectClass:function(e){var t=this;this.$http.post("/MyCourses/selectClass",{classId:e.classId,studentId:this.$cookies.get("userId")}).then(function(s){if("SUCCESS"===s.data){t.$message.success("申请选课成功！开课时间到后会自动公布选课结果"),e.number.current+=1,t.selectedClass.push(e);for(var a=0;a<t.unselectedClass.length;a++)if(t.unselectedClass[a].classId===e.classId){t.unselectedClass.splice(a,1);break}}else"FAILED"===s.data?t.$message.error("申请选课失败，该课程已经开课且人数已满"):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})},clickCancelClassSelection:function(e){var t=this;this.$confirm("是否确定退选该课程?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post("/MyCourses/cancelClassSelection",{classId:e.classId,studentId:t.$cookies.get("userId")}).then(function(s){if("SUCCESS"===s.data){t.$message.success("取消申请选课成功！"),e.number.current-=1,t.unselectedClass.push(e);for(var a=0;a<t.selectedClass.length;a++)if(t.selectedClass[a].classId===e.classId){t.selectedClass.splice(a,1);break}}else t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})}).catch(function(){})},numberFormatter:function(e){return e.number.current+" / "+e.number.max},startDateFormatter:function(e){return e.startTime.slice(0,3).join("-")},endDateFormatter:function(e){return e.endTime.slice(0,3).join("-")}},data:function(){return{name:this.$cookies.get("email"),unselectedClass:[{classId:1,name:"课程1",teacher:"教师1",grade:1,term:1,classOrder:1,startTime:[2019,3,1],endTime:[2019,6,30],number:{current:88,max:90}},{classId:2,name:"课程2",teacher:"教师2",grade:2,term:1,classOrder:1,startTime:[2019,3,1],endTime:[2019,6,30],number:{current:37,max:100}}],selectedClass:[{classId:3,name:"课程3",teacher:"教师3",grade:2,term:1,classOrder:1,startTime:[2019,3,1],endTime:[2019,6,30],number:{current:201,max:250}}]}}},b,!1,function(e){s("h8hd")},"data-v-323f3326",null).exports,w={name:"MyInformation",mounted:function(){var e=this;this.$cookies.isKey("userId")?this.$http.get("/MyCourses/information",{params:{userId:this.$cookies.get("userId")}}).then(function(t){"SUCCESS"===t.data.result?(e.userInfo=t.data.userInfo,e.classesStatistic=t.data.classesStatistic,e.messages=t.data.messages,t.data.userInfo.forEach(function(t){"姓名"===t.name?e.editUserForm.name=t.value:"学号"===t.name&&(e.editUserForm.studentId=t.value)})):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")}):this.$router.push("/login")},data:function(){return{name:this.$cookies.get("email"),userInfo:[{name:"姓名",value:"未知"},{name:"身份",value:"未知"},{name:"邮箱",value:"未知"},{name:"学号",value:"未知"}],isEditing:!1,editUserForm:{name:"未知",studentId:"未知"},classesStatistic:[{grade:1,term:1,name:"课程1",teacher:"教师1",score:100,isQuit:!1},{grade:1,term:1,name:"课程2",teacher:"教师2",score:0,isQuit:!0},{grade:2,term:1,name:"课程3",teacher:"教师3",score:60,isQuit:!1}],messages:[{messageId:"1",title:"标题1",sender:"教师1",time:"2019-03-07 21:18:00",message:"正文"},{messageId:"2",title:"标题2",sender:"教师1",time:"2019-03-08 21:18:00",message:"正文2"},{messageId:"3",title:"标题3",sender:"教师2",time:"2019-03-09 21:18:00",message:"正文正文正文正文正文正文正文正文正文正文正文正文正文"}]}},methods:{pre2:function(e){return(Array(2).join("0")+e).slice(-2)},editUser:function(){this.isEditing=!0},cancelEditUser:function(){this.isEditing=!1},deleteAllMessages:function(){var e=this;this.$confirm("是否删除全部消息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.messages.forEach(function(e){t.push(e.messageId)}),e.$http.post("/MyCourses/deleteMessages",t).then(function(t){"SUCCESS"===t.data?(e.$message.success("成功删除全部消息!"),e.messages=[]):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})}).catch(function(){})},deleteMessage:function(e){var t=this;this.$http.post("/MyCourses/deleteMessages",[e]).then(function(s){"SUCCESS"===s.data?(t.messages=t.messages.filter(function(t){return t.messageId!==e}),t.$message.success("成功删除消息")):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})},updateUserInfo:function(){var e=this;this.$http.post("/MyCourses/updateUserInfo",{userId:this.$cookies.get("userId"),name:this.editUserForm.name,studentId:this.editUserForm.studentId}).then(function(t){"SUCCESS"===t.data?(e.userInfo.map(function(t){return"姓名"===t.name?t.value=e.editUserForm.name:"学号"===t.name&&(t.value=e.editUserForm.studentId),t}),e.isEditing=!1):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})},deleteAccount:function(){var e=this;this.$confirm("是否永久注销你的账号？此举动不会真正删除该账号的信息，而你将无法再使用该账号！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("/MyCourses/deleteAccount",e.$cookies.get("userId")).then(function(t){"SUCCESS"===t.data?(e.$message.success("成功永久注销你的账号!"),e.$cookies.remove("userId"),e.$cookies.remove("userType"),e.$router.push("/login")):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})}).catch(function(){})},isQuitFormatter:function(e){return e.isQuit?"已退":"选上"},getSummaries:function(e){var t=e.columns,s=e.data,a=[],r=0,o=0,i=!0,n=!1,l=void 0;try{for(var c,d=f()(s);!(i=(c=d.next()).done);i=!0){c.value.isQuit?r++:o++}}catch(e){n=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(n)throw l}}return t.forEach(function(e,t){if(0===t)a[t]="绩点";else if(4===t){var i=s.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})||(a[t]=i.reduce(function(e,t){var s=Number(t);return!isNaN(s)&&t>0?e+t:e},0),a[t]/=0===o?1:o,a[t]=a[t].toFixed(2))}else a[t]=5===t?o+" / "+r:""}),a}}},C={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("student-nav",{attrs:{name:e.name}})],1),e._v(" "),s("el-main",[s("el-row",[s("el-col",[s("el-card",{staticClass:"box-card",staticStyle:{width:"25%"}},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("账户信息\n            "),e.isEditing?s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:e.cancelEditUser}},[e._v("取消编辑")]):s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:e.editUser}},[e._v("编辑")])],1),e._v(" "),e._l(e.userInfo,function(t,a){return s("div",{key:a,staticClass:"text"},[s("label",[e._v(e._s(t.name)+":  ")]),e._v(" "),e.isEditing&&"姓名"===t.name?s("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.editUserForm.name,callback:function(t){e.$set(e.editUserForm,"name",t)},expression:"editUserForm.name"}}):e.isEditing&&"学号"===t.name?s("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.editUserForm.studentId,callback:function(t){e.$set(e.editUserForm,"studentId",t)},expression:"editUserForm.studentId"}}):s("span",[e._v(e._s(t.value))])],1)}),e._v(" "),e.isEditing?s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.updateUserInfo()}}},[e._v("保存修改")]):e._e()],2),e._v(" "),s("el-card",{staticClass:"box-card",staticStyle:{width:"37%"}},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("选/退课统计")]),e._v(" "),s("el-table",{attrs:{data:e.classesStatistic,"default-sort":{prop:"grade",order:"ascending"},"max-height":"450px","summary-method":e.getSummaries,"show-summary":"",stripe:""}},[s("el-table-column",{attrs:{prop:"grade",label:"年级",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"term",label:"学期",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"课名",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"teacher",label:"教师",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"score",label:"成绩",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"isQuit",label:"选/退",sortable:"",formatter:e.isQuitFormatter}})],1)],1),e._v(" "),s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("消息\n            "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:e.deleteAllMessages}},[e._v("全部删除")])],1),e._v(" "),e._l(e.messages,function(t,a){return s("el-card",{key:a,staticClass:"message-card",attrs:{"body-style":{padding:"0px"}}},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("\n              "+e._s(t.title)+"\n              "),s("i",{staticClass:"el-icon-error deleteMessageIcon",staticStyle:{float:"right"},on:{click:function(s){e.deleteMessage(t.messageId)}}}),e._v(" "),s("span",{staticClass:"message-sender"},[e._v("发送者："+e._s(t.sender))])]),e._v(" "),s("div",{staticClass:"message-message"},[e._v(e._s(t.message))]),e._v(" "),s("div",{staticClass:"bottom"},[s("time",{staticClass:"time",attrs:{datetime:t.time}},[e._v(e._s(t.time[0])+"年"+e._s(t.time[1])+"月"+e._s(t.time[2])+"日 "+e._s(e.pre2(t.time[3]))+":"+e._s(e.pre2(t.time[4]))+":"+e._s(e.pre2(t.time[5])))])])])})],2)],1),e._v(" "),s("el-col",[s("el-button",{on:{click:e.deleteAccount}},[e._v("注销账户")])],1)],1)],1)],1)},staticRenderFns:[]};var y=s("VU/8")(w,C,!1,function(e){s("yxo9")},"data-v-61e05b1f",null).exports,k={name:"TeacherCourses",mounted:function(){var e=this;this.$cookies.isKey("userId")?this.$http.get("/MyCourses/TeacherCourses",{params:{teacherId:this.$cookies.get("userId")}}).then(function(t){"SUCCESS"===t.data.result?e.teacherCourses=t.data.teacherCourses:e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")}):this.$router.push("/login")},methods:{pre2:function(e){return(Array(2).join("0")+e).slice(-2)},dateTime:function(e){var t=e.length>=6?e[5]:0;return e[0]+"年"+e[1]+"月"+e[2]+"日 "+e[3]+":"+this.pre2(e[4])+":"+this.pre2(t)},clickClass:function(e){var t=this;this.$http.get("/MyCourses/class",{params:{userId:this.userId,classId:e}}).then(function(e){console.log(e.data),"SUCCESS"===e.data.result?(t.classInfo=e.data.classInfo,t.isProfile=!1):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})},toProfile:function(){this.isProfile=!0},clickEditScores:function(){var e=this;this.$http.get("/MyCourses/getClassScores",{params:{userId:this.userId,classId:this.classInfo.id}}).then(function(t){"SUCCESS"===t.data.result?(e.editClassScore.scores=t.data.scores,e.editClassScore.publishMethod=e.classInfo.publishMethod,e.editScoresVisible=!0):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})},clickUploadExcel:function(e){var t=this;console.log("file",e);var s={0:e.raw};if(s.length<=0)return!1;if(!/\.(xls|xlsx)$/.test(s[0].name.toLowerCase()))return this.$message.error("上传格式不正确，请上传xls或者xlsx格式"),!1;var a=new FileReader;a.onload=function(e){console.log("loaded");try{var s=e.target.result,a=t.$XLSX.read(s,{type:"binary"}),r=a.SheetNames[0],o=t.$XLSX.utils.sheet_to_json(a.Sheets[r]);console.log("json:",o);for(var i=0;i<o.length;i+=1)for(var n=0;n<t.editClassScore.scores.length;n+=1)if(o[i]["学号"]===Number(t.editClassScore.scores[n].strId)){t.editClassScore.scores[n].score=o[i]["成绩"];break}t.$refs.classExcel.value=""}catch(e){return!1}},a.readAsBinaryString(s[0])},clickUpdateScores:function(){var e=this;this.$http.post("/MyCourses/updateScores",{scores:this.editClassScore.scores,classId:this.classInfo.id,publishMethod:this.editClassScore.publishMethod}).then(function(t){console.log(t.data),"SUCCESS"===t.data?(e.classInfo.publishMethod=e.editClassScore.publishMethod,e.editScoresVisible=!1,e.$message.success("发布班次成绩成功！")):(e.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+t.data))},function(){e.$message.error("网络错误，请刷新或稍后再试")})},addPost:function(e,t){var s=this;console.log(this.$refs[e][0]),this.$refs[e][0].validate(function(e){if(!e)return!1;var a={userId:s.userId,courseId:t,title:s.postForm.title,text:s.postForm.text};s.$http.post("/MyCourses/addPost",a).then(function(e){console.log(e.data),"SUCCESS"===e.data.result?s.teacherCourses.forEach(function(a){a.courseId===t&&(a.posts.push(e.data.post),s.newPostDialogVisible=!1,s.$message.success("发帖成功"))}):(s.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+e.data.result))},function(){s.$message.error("网络错误，请刷新或稍后再试")})})},addReply:function(e){var t=this;this.$refs[e][0].validate(function(e){if(!e)return!1;var s={userId:t.userId,postId:t.replyForm.postId,text:t.replyForm.text};t.$http.post("/MyCourses/addReply",s).then(function(e){console.log(e.data),"SUCCESS"===e.data.result?t.teacherCourses.forEach(function(s){s.posts.forEach(function(s){s.id===t.replyForm.postId&&(s.replies.push(e.data.reply),t.newReplyDialogVisible=!1,t.$message.success("回帖成功"))})}):(t.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+e.data.result))},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},clickCourseware:function(e,t){var s=this;this.$http.get("/MyCourses/downloadCourseware",{params:{coursewareId:e},responseType:"blob"}).then(function(e){if(console.log(e),e){var s=window.URL.createObjectURL(e.data),a=document.createElement("a");a.style.display="none",a.href=s,a.setAttribute("download",t),document.body.appendChild(a),a.click()}},function(){s.$message.error("网络错误，请刷新或稍后再试")})},beforeCoursewareUpload:function(e){var t=e.size/1024/1024<500;return t||this.$message.error("上传文件大小不能超过500MB!"),t},uploadCoursewareSuccess:function(e){var t=this;console.log(e),"SUCCESS"===e.result?this.teacherCourses.forEach(function(s){s.courseId===e.courseId&&(s.coursewares.push({id:e.coursewareId,name:e.coursewareName}),t.$message.success("上传课件成功！"))}):this.$message.error("网络错误，请刷新或稍后再试")},publishClass:function(e,t){this.newClassForm.courseId=e,this.newClassForm.name=t,this.newClassDialogVisible=!0},addCourse:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$http.post("/MyCourses/addCourse",{teacherId:t.userId,name:t.newCourseForm.name,grade:t.newCourseForm.grade}).then(function(e){"SUCCESS"===e.data?(t.newCourseDialogVisible=!1,t.teacherCourses.push({courseId:0,name:t.newCourseForm.name,grade:t.newCourseForm.grade,passReview:!1,coursewares:[],posts:[],classes:[]}),t.$message.success("创建新课程成功！请等待管理员审核")):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},addClass:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log(t.newClassForm.time),t.$http.post("/MyCourses/publishClasses",{courseId:t.newClassForm.courseId,startTime:t.newClassForm.time[0],endTime:t.newClassForm.time[1],classNumber:t.newClassForm.classNumber,term:t.newClassForm.term,maxNumber:t.newClassForm.maxNumber}).then(function(e){"SUCCESS"===e.data?(t.newClassDialogVisible=!1,t.teacherCourses.forEach(function(e){if(e.courseId===t.newClassForm.courseId)for(var s=0;s<t.newClassForm.classNumber;s++){var a=[t.newClassForm.time[0].getFullYear(),t.newClassForm.time[0].getMonth(),t.newClassForm.time[0].getDay()],r=[t.newClassForm.time[1].getFullYear(),t.newClassForm.time[1].getMonth(),t.newClassForm.time[1].getDay()];e.classes.push({classId:0,term:t.newClassForm.term,classOrder:s+1,startTime:a,endTime:r,passReview:!1})}}),t.$message.success("发布新课程成功！请等待管理员审核")):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},publishHomework:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$http.post("/MyCourses/publishHomework",{id:0,submitted:!1,classId:t.classInfo.id,name:t.newHomeworkForm.name,description:t.newHomeworkForm.description,deadline:t.newHomeworkForm.deadline,sizeLimit:t.newHomeworkForm.sizeLimit,typeRestriction:t.newHomeworkForm.typeRestriction}).then(function(e){"SUCCESS"===e.data.result?(t.newHomeworkVisible=!1,t.classInfo.homework.push(e.data.homework),t.$message.success("发布作业成功")):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},clickEditHwScores:function(e,t){var s=this;this.$http.get("/MyCourses/getHomeworkScores",{params:{userId:this.userId,homeworkId:e}}).then(function(a){"SUCCESS"===a.data.result?(s.editHomework.id=e,s.editHomework.publishMethod=t,s.editHomework.homeworkScores=a.data.homeworkScores,s.editHwScoresVisible=!0):s.$message.error("网络错误，请刷新或稍后再试")},function(){s.$message.error("网络错误，请刷新或稍后再试")})},clickUploadHwExcel:function(e){var t=this;console.log("file",e);var s={0:e.raw};if(s.length<=0)return!1;if(!/\.(xls|xlsx)$/.test(s[0].name.toLowerCase()))return this.$message.error("上传格式不正确，请上传xls或者xlsx格式"),!1;var a=new FileReader;a.onload=function(e){console.log("loaded");try{var s=e.target.result,a=t.$XLSX.read(s,{type:"binary"}),r=a.SheetNames[0],o=t.$XLSX.utils.sheet_to_json(a.Sheets[r]);console.log("json:",o);for(var i=0;i<o.length;i+=1)for(var n=0;n<t.editHomework.homeworkScores.length;n+=1)if(o[i]["学号"]===Number(t.editHomework.homeworkScores[n].studentId)){t.editHomework.homeworkScores[n].score=o[i]["成绩"];break}t.$refs.homeworkExcel.value=""}catch(e){return!1}},a.readAsBinaryString(s[0])},clickUpdateHwScores:function(e){var t=this;this.$http.post("/MyCourses/updateHwScores",{homeworkId:e,publishMethod:this.editHomework.publishMethod,scores:this.editHomework.homeworkScores}).then(function(s){console.log(s.data),"SUCCESS"===s.data?(t.classInfo.homework.forEach(function(s){s.id===e&&(s.publishMethod=t.editHomework.publishMethod)}),t.editHwScoresVisible=!1,t.$message.success("发布作业成绩成功！")):(t.$message.error("网络错误，请刷新或稍后再试"),console.log("未知错误："+s.data))},function(){t.$message.error("网络错误，请刷新或稍后再试")})},clickDownloadSubmissions:function(e){var t=this;this.$http.get("/MyCourses/downloadSubmissions",{params:{homeworkId:e},responseType:"blob"}).then(function(e){if(console.log(e),e){var t=window.URL.createObjectURL(e.data),s=document.createElement("a");s.style.display="none",s.href=t;var a=e.headers.map["content-disposition"][0];a=a.substring(a.indexOf("filename=")+9),s.setAttribute("download",a),document.body.appendChild(s),s.click()}},function(){t.$message.error("网络错误，请刷新或稍后再试")})}},data:function(){return{name:this.$cookies.get("email"),userId:this.$cookies.get("userId"),isProfile:!0,editScoresVisible:!1,editHwScoresVisible:!1,newPostDialogVisible:!1,newReplyDialogVisible:!1,newCourseDialogVisible:!1,newClassDialogVisible:!1,newHomeworkVisible:!1,activeHomeworkId:"",activePostId:"",validTypes:["doc","docx","txt","rar","zip","md","ppt","pptx","xls","xlsx","c","cpp","java","py"],postForm:{title:"",text:""},replyForm:{postId:1,text:""},newClassForm:{courseId:1,name:"",term:1,classNumber:1,maxNumber:0,time:[]},newCourseForm:{name:"",grade:1},newHomeworkForm:{classId:1,name:"",description:"",deadline:"",sizeLimit:20,typeRestriction:[]},newCourseRules:{name:[{required:!0,message:"请输入课程名",trigger:"blur"}]},newClassRules:{time:[{type:"array",required:!0,message:"请选择时间段",trigger:"change"}]},newHomeworkRules:{name:[{required:!0,message:"请输入作业题目",trigger:"blur"}],deadline:[{type:"date",required:!0,message:"请选择截止时间",trigger:"change"}]},postRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],text:[{required:!0,message:"请输入正文",trigger:"blur"}]},teacherCourses:[{courseId:1,name:"课程1",grade:1,passReview:!0,coursewares:[{id:1,name:"课件1"},{id:2,name:"课件2"}],posts:[{id:1,poster:"发帖者1",title:"标题1",text:"正文",time:[],replies:[{id:1,replies:"回帖者1",text:"正文",time:"2019-03-9"},{id:2,replies:"回帖者2",text:"正文",time:[]}]},{id:2,poster:"发帖者2",title:"标题2",text:"正文",time:[],replies:[{id:1,replies:"回帖者1",text:"正文",time:"2019-03-10"}]}],classes:[{classId:1,term:1,classOrder:1,startTime:[],endTime:[],passReview:!0},{classId:2,term:1,classOrder:2,startTime:[],endTime:[],passReview:!0},{classId:3,term:1,classOrder:3,startTime:[],endTime:[],passReview:!1}]},{courseId:2,name:"课程2",grade:1,passReview:!0,coursewares:[{id:1,name:"课件1"}],posts:[{id:1,poster:"发帖者1",title:"标题1",text:"正文",time:[],replies:[{id:1,replies:"回帖者1",text:"正文",time:[]},{id:2,replies:"回帖者2",text:"正文",time:[2019,3,29,0,0,0]}]}],classes:[{classId:1,term:1,classOrder:1,startTime:[],endTime:[],passReview:!1}]},{courseId:3,name:"课程3",grade:2,passReview:!1,coursewares:[],posts:[],classes:[]}],classInfo:{id:1,name:"课程1",teacherName:"教师1",grade:1,term:1,classOrder:1,number:105,startTime:[2019,3,1],endTime:[2019,6,30],publishMethod:"NOT_YET",homework:[{id:1,name:"作业1",description:"一段描述",deadline:[2019,3,29,0,0,0],publishMethod:"NOT_YET",sizeLimit:2,numberSubmitted:1,typeRestriction:["doc","docx"]},{id:2,name:"作业2",description:"一段描述",deadline:[2019,3,29,0,0,0],publishMethod:"ONLY_FOR_ME",sizeLimit:2,numberSubmitted:0,typeRestriction:["doc","docx"]}]},editHomework:{id:0,publishMethod:"",homeworkScores:[{submissionId:1,studentId:"161250042",score:100},{submissionId:2,studentId:"161250040",score:60},{submissionId:0,studentId:"161250039",score:0}]},editClassScore:{publishMethod:"",scores:[{studentId:1,strId:"161250042",score:100},{studentId:2,strId:"161250040",score:60},{studentId:3,strId:"161250039",score:0}]}}}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("teacher-nav",{attrs:{name:e.name}})],1),e._v(" "),s("el-main",[s("el-row",[s("el-col",e._l(e.teacherCourses,function(t,a){return s("el-card",{directives:[{name:"show",rawName:"v-show",value:e.isProfile,expression:"isProfile"}],key:a,staticClass:"box-card"},[s("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(t.name)+"\n            "),s("i",{directives:[{name:"show",rawName:"v-show",value:!t.passReview,expression:"!teacherCourse.passReview"}]},[e._v(" （审核中）")]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-plus",disabled:!t.passReview},on:{click:function(s){e.publishClass(t.courseId,t.name)}}},[e._v("发布新课程\n            ")])],1),e._v(" "),e._l(t.classes,function(t,a){return s("el-button",{key:a,staticClass:"teacher-class",attrs:{disabled:!t.passReview},on:{click:function(s){e.clickClass(t.classId)}}},[e._v("\n            "+e._s(t.startTime[0])+"年"+e._s(t.startTime[1])+"月"+e._s(t.startTime[2])+"日 第"+e._s(t.term)+"学期 "+e._s(t.classOrder)+"班\n            "),s("i",{directives:[{name:"show",rawName:"v-show",value:!t.passReview,expression:"!teacherClass.passReview"}]},[e._v(" （审核中）")])])}),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"class-info-card"},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("课件")]),e._v(" "),e._l(t.coursewares,function(t,a){return s("div",{key:a,staticClass:"left"},[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.clickCourseware(t.id,t.name)}}},[e._v(e._s(t.name))])],1)}),e._v(" "),s("el-upload",{staticStyle:{"margin-top":"15px","text-align":"center"},attrs:{name:"coursewares",data:{courseId:t.courseId},action:"/MyCourses/uploadCourseware","before-upload":e.beforeCoursewareUpload,"on-success":e.uploadCoursewareSuccess,multiple:""}},[s("el-button",{attrs:{size:"small",type:"primary",disabled:!t.passReview}},[e._v("点击上传")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("大小不能超过500MB")])],1)],2)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"class-info-card",staticStyle:{"text-align":"center"}},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("论坛")]),e._v(" "),s("el-collapse",{model:{value:e.activePostId,callback:function(t){e.activePostId=t},expression:"activePostId"}},e._l(t.posts,function(t,a){return s("el-collapse-item",{key:a,attrs:{name:t.id}},[s("template",{slot:"title"},[e._v("标题："+e._s(t.title)+"  ("+e._s(e.dateTime(t.time))+")")]),e._v(" "),s("el-card",{staticStyle:{margin:"5px 5px"}},[s("el-button",{staticStyle:{float:"right",padding:"2px 0"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(s){e.newReplyDialogVisible=!0,e.replyForm.postId=t.id}}},[e._v("回帖\n                      ")]),e._v(" "),s("div",{staticClass:"left"},[e._v("由 "+e._s(t.poster)+" 发帖：")]),e._v(" "),s("div",{staticClass:"left"},[e._v(e._s(t.text))])],1),e._v(" "),e._l(t.replies,function(t,a){return s("el-card",{key:a,staticClass:"class-info-card"},[s("div",{staticClass:"left"},[e._v("由 "+e._s(t.replies)+" 于 "+e._s(e.dateTime(t.time))+" 回帖：")]),e._v(" "),s("div",{staticClass:"left"},[e._v(e._s(t.text))])])})],2)}),1),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px"},attrs:{disabled:!t.passReview},on:{click:function(t){e.newPostDialogVisible=!0}}},[e._v("发布新帖子")]),e._v(" "),s("el-dialog",{attrs:{title:"新的帖子",visible:e.newPostDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.newPostDialogVisible=t}}},[s("el-form",{ref:"postForm",refInFor:!0,staticClass:"post-wrap",attrs:{model:e.postForm,rules:e.postRules}},[s("el-form-item",{attrs:{prop:"title"}},[s("el-input",{staticClass:"input",attrs:{type:"text",placeholder:"标题"},model:{value:e.postForm.title,callback:function(t){e.$set(e.postForm,"title",t)},expression:"postForm.title"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"text"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入正文"},model:{value:e.postForm.text,callback:function(t){e.$set(e.postForm,"text",t)},expression:"postForm.text"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"button",on:{click:function(t){e.newPostDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(s){e.addPost("postForm",t.courseId)}}},[e._v("发帖")])],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"新的回帖",visible:e.newReplyDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.newReplyDialogVisible=t}}},[s("el-form",{ref:"replyForm",refInFor:!0,staticClass:"post-wrap",attrs:{model:e.replyForm}},[s("el-form-item",{attrs:{prop:"text",rules:{required:!0,message:"回复内容不能为空",trigger:"blur"}}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入回复内容"},model:{value:e.replyForm.text,callback:function(t){e.$set(e.replyForm,"text",t)},expression:"replyForm.text"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"button",on:{click:function(t){e.newReplyDialogVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.addReply("replyForm")}}},[e._v("回帖")])],1)],1)],1)],1)],1)],1)],2)}),1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isProfile,expression:"isProfile"}],staticStyle:{"margin-top":"16px","margin-right":"40px"},on:{click:function(t){e.newCourseDialogVisible=!0}}},[e._v("创建新课程\n        ")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"新的课程",visible:e.newCourseDialogVisible,width:"35%",center:""},on:{"update:visible":function(t){e.newCourseDialogVisible=t}}},[s("el-form",{ref:"newCourseForm",attrs:{model:e.newCourseForm,"label-width":"80px",rules:e.newCourseRules}},[s("el-form-item",{attrs:{label:"课程名称",prop:"name"}},[s("el-input",{staticStyle:{float:"left"},model:{value:e.newCourseForm.name,callback:function(t){e.$set(e.newCourseForm,"name",t)},expression:"newCourseForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"年级"}},[s("el-input-number",{staticStyle:{float:"left"},attrs:{min:1,max:4},model:{value:e.newCourseForm.grade,callback:function(t){e.$set(e.newCourseForm,"grade",t)},expression:"newCourseForm.grade"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.newCourseDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addCourse("newCourseForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"为《"+this.newClassForm.name+"》开新的班次",visible:e.newClassDialogVisible,width:"35%",center:""},on:{"update:visible":function(t){e.newClassDialogVisible=t}}},[s("el-form",{ref:"newClassForm",attrs:{model:e.newClassForm,"label-width":"80px",rules:e.newClassRules}},[s("el-form-item",{attrs:{label:"学期"}},[s("el-input-number",{staticStyle:{float:"left"},attrs:{min:1,max:3},model:{value:e.newClassForm.term,callback:function(t){e.$set(e.newClassForm,"term",t)},expression:"newClassForm.term"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"班级个数"}},[s("el-input-number",{staticStyle:{float:"left"},attrs:{min:1,max:99},model:{value:e.newClassForm.classNumber,callback:function(t){e.$set(e.newClassForm,"classNumber",t)},expression:"newClassForm.classNumber"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"限选人数"}},[s("el-input-number",{staticStyle:{float:"left"},attrs:{min:0,max:9999},model:{value:e.newClassForm.maxNumber,callback:function(t){e.$set(e.newClassForm,"maxNumber",t)},expression:"newClassForm.maxNumber"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"日期",prop:"time"}},[s("el-date-picker",{staticStyle:{float:"left"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.newClassForm.time,callback:function(t){e.$set(e.newClassForm,"time",t)},expression:"newClassForm.time"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.newClassDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addClass("newClassForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isProfile,expression:"!isProfile"}]},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"class-info-card"},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.classInfo.name))]),e._v(" "),s("div",{staticClass:"left"},[e._v("任课教师："+e._s(e.classInfo.teacherName))]),e._v(" "),s("div",{staticClass:"left"},[e._v("时期：大学"+e._s(e.classInfo.grade)+"年级第"+e._s(e.classInfo.term)+"学期")]),e._v(" "),s("div",{staticClass:"left"},[e._v("班级："+e._s(e.classInfo.classOrder)+"班")]),e._v(" "),s("div",{staticClass:"left"},[e._v("开课时间："+e._s(e.classInfo.startTime[0])+"年"+e._s(e.classInfo.startTime[1])+"月"+e._s(e.classInfo.startTime[2])+"日")]),e._v(" "),s("div",{staticClass:"left"},[e._v("结课时间："+e._s(e.classInfo.endTime[0])+"年"+e._s(e.classInfo.endTime[1])+"月"+e._s(e.classInfo.endTime[2])+"日")]),e._v(" "),s("div",{staticClass:"left"},[e._v("学生人数："+e._s(e.classInfo.number))]),e._v(" "),"NOT_YET"===e.classInfo.publishMethod?s("div",{staticClass:"left"},[e._v("成绩：未公布")]):s("div",{staticClass:"left"},[e._v("成绩：已公布\n              "),"ONLY_FOR_ME"===e.classInfo.publishMethod?s("i",[e._v("（仅可查看本人）")]):"FULLY_OPEN"===e.classInfo.publishMethod?s("i",[e._v("（完全公开）")]):e._e()])]),e._v(" "),s("el-button",{on:{click:e.toProfile}},[e._v("返回")]),e._v(" "),s("el-button",{on:{click:function(t){e.clickEditScores()}}},[e._v("编辑成绩")]),e._v(" "),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"编辑成绩",visible:e.editScoresVisible,center:""},on:{"update:visible":function(t){e.editScoresVisible=t}}},[s("el-table",{attrs:{data:e.editClassScore.scores,"max-height":"450px","default-sort":{prop:"strId",order:"ascending"},stripe:""}},[s("el-table-column",{attrs:{property:"strId",label:"学号",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{property:"score",label:"成绩",sortable:""}})],1),e._v(" "),s("div",{staticStyle:{"margin-top":"15px"}},[e._v("公开方式：\n              "),s("el-radio-group",{model:{value:e.editClassScore.publishMethod,callback:function(t){e.$set(e.editClassScore,"publishMethod",t)},expression:"editClassScore.publishMethod"}},[s("el-radio",{attrs:{label:"FULLY_OPEN"}},[e._v("完全公开")]),e._v(" "),s("el-radio",{attrs:{label:"ONLY_FOR_ME"}},[e._v("仅可查看本人")])],1)],1),e._v(" "),s("el-upload",{ref:"classExcel",staticStyle:{"margin-top":"16px","margin-left":"35%",float:"left"},attrs:{"auto-upload":!1,action:"http://jsonplaceholder.typicode.com/posts","on-change":e.clickUploadExcel,"show-file-list":!1,accept:".xls,.xlsx",limit:1}},[s("el-button",{attrs:{slot:"trigger"},slot:"trigger"},[e._v("导入Excel")])],1),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px","margin-left":"16px"},on:{click:function(t){e.editScoresVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(t){e.clickUpdateScores()}}},[e._v("发布成绩")])],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"class-info-card"},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("作业")]),e._v(" "),s("el-collapse",{attrs:{accordion:""},model:{value:e.activeHomeworkId,callback:function(t){e.activeHomeworkId=t},expression:"activeHomeworkId"}},e._l(e.classInfo.homework,function(t,a){return s("el-collapse-item",{key:a,attrs:{name:t.id}},[s("template",{slot:"title"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"left"},[e._v(e._s(t.description))]),e._v(" "),s("div",{staticClass:"left"},[e._v("截止日期："+e._s(e.dateTime(t.deadline)))]),e._v(" "),s("div",{staticClass:"left"},[e._v("已提交人数："+e._s(t.numberSubmitted))]),e._v(" "),"NOT_YET"===t.publishMethod?s("div",{staticClass:"left"},[e._v("成绩：未公布")]):s("div",{staticClass:"left"},[e._v("成绩：已公布\n                  "),"ONLY_FOR_ME"===t.publishMethod?s("i",[e._v("（仅可查看本人）")]):"FULLY_OPEN"===t.publishMethod?s("i",[e._v("（完全公开）")]):e._e()]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px"},on:{click:function(s){e.clickEditHwScores(t.id,t.publishMethod)}}},[e._v("作业成绩")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px"},on:{click:function(s){e.clickDownloadSubmissions(t.id)}}},[e._v("下载学生作业")])],2)}),1),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px"},on:{click:function(t){e.newHomeworkVisible=!0}}},[e._v("发布新作业")])],1)],1)],1),e._v(" "),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"编辑作业成绩",visible:e.editHwScoresVisible,center:""},on:{"update:visible":function(t){e.editHwScoresVisible=t}}},[s("el-table",{attrs:{data:e.editHomework.homeworkScores,"max-height":"450px","default-sort":{prop:"studentId",order:"ascending"},stripe:""}},[s("el-table-column",{attrs:{property:"studentId",label:"学号",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{property:"score",label:"成绩",sortable:""}})],1),e._v(" "),s("div",{staticStyle:{"margin-top":"15px"}},[e._v("公开方式：\n          "),s("el-radio-group",{model:{value:e.editHomework.publishMethod,callback:function(t){e.$set(e.editHomework,"publishMethod",t)},expression:"editHomework.publishMethod"}},[s("el-radio",{attrs:{label:"FULLY_OPEN"}},[e._v("完全公开")]),e._v(" "),s("el-radio",{attrs:{label:"ONLY_FOR_ME"}},[e._v("仅可查看本人")])],1)],1),e._v(" "),s("el-upload",{ref:"homeworkExcel",staticStyle:{"margin-top":"16px","margin-left":"35%",float:"left"},attrs:{"auto-upload":!1,action:"http://jsonplaceholder.typicode.com/posts","on-change":e.clickUploadHwExcel,"show-file-list":!1,accept:".xls,.xlsx",limit:1}},[s("el-button",{attrs:{slot:"trigger"},slot:"trigger"},[e._v("导入Excel")])],1),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px","margin-left":"16px"},on:{click:function(t){e.editHwScoresVisible=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"16px","margin-left":"16px"},attrs:{type:"primary"},on:{click:function(t){e.clickUpdateHwScores(e.editHomework.id)}}},[e._v("发布成绩")])],1),e._v(" "),s("el-dialog",{attrs:{title:"发布作业",visible:e.newHomeworkVisible,width:"40%",center:""},on:{"update:visible":function(t){e.newHomeworkVisible=t}}},[s("el-form",{ref:"newHomeworkForm",attrs:{model:e.newHomeworkForm,"label-width":"100px",rules:e.newHomeworkRules}},[s("el-form-item",{attrs:{label:"作业题目",prop:"name"}},[s("el-input",{staticStyle:{float:"left"},model:{value:e.newHomeworkForm.name,callback:function(t){e.$set(e.newHomeworkForm,"name",t)},expression:"newHomeworkForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"作业内容"}},[s("el-input",{staticStyle:{float:"left"},model:{value:e.newHomeworkForm.description,callback:function(t){e.$set(e.newHomeworkForm,"description",t)},expression:"newHomeworkForm.description"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"截止时间",prop:"deadline"}},[s("el-date-picker",{staticStyle:{float:"left"},attrs:{type:"datetime",placeholder:"选择时间"},model:{value:e.newHomeworkForm.deadline,callback:function(t){e.$set(e.newHomeworkForm,"deadline",t)},expression:"newHomeworkForm.deadline"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"大小限制(MB)",prop:"sizeLimit"}},[s("el-input-number",{staticStyle:{float:"left"},attrs:{min:1,max:100},model:{value:e.newHomeworkForm.sizeLimit,callback:function(t){e.$set(e.newHomeworkForm,"sizeLimit",t)},expression:"newHomeworkForm.sizeLimit"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"类型限制"}},[s("el-select",{attrs:{placeholder:"不选则为无限制",multiple:""},model:{value:e.newHomeworkForm.typeRestriction,callback:function(t){e.$set(e.newHomeworkForm,"typeRestriction",t)},expression:"newHomeworkForm.typeRestriction"}},e._l(e.validTypes,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.newHomeworkVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.publishHomework("newHomeworkForm")}}},[e._v("发 布")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var x=s("VU/8")(k,I,!1,function(e){s("+coZ")},"data-v-0bf357ea",null).exports,S={name:"TeacherInfo",mounted:function(){var e=this;this.$cookies.isKey("userId")?this.$http.get("/MyCourses/information",{params:{userId:this.$cookies.get("userId")}}).then(function(t){"SUCCESS"===t.data.result?(e.userInfo=t.data.userInfo,e.messages=t.data.messages,e.classes=t.data.classes,t.data.userInfo.forEach(function(t){"姓名"===t.name&&(e.editUserForm.name=t.value)})):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")}):this.$router.push("/login")},data:function(){return{name:this.$cookies.get("email"),userId:this.$cookies.get("userId"),userInfo:[{name:"姓名",value:"未知"},{name:"身份",value:"未知"},{name:"邮箱",value:"未知"}],isEditing:!1,editUserForm:{name:"未知"},newMessageDialogVisible:!1,newMessageForm:{title:"",message:"",classes:[],users:[]},classes:[{classId:1,courseName:"课程1",startTime:"2019-03-01",classOrder:1},{classId:2,courseName:"课程1",startTime:"2019-03-01",classOrder:2}],messages:[{messageId:1,title:"标题1",sender:"教师1",time:"2019-03-07 21:18:00",message:"正文"},{messageId:2,title:"标题2",sender:"教师1",time:"2019-03-08 21:18:00",message:"正文2"},{messageId:3,title:"标题3",sender:"教师2",time:"2019-03-09 21:18:00",message:"正文正文正文正文正文正文正文正文正文正文正文正文正文"}]}},methods:{pre2:function(e){return(Array(2).join("0")+e).slice(-2)},editUser:function(){this.isEditing=!0},cancelEditUser:function(){this.isEditing=!1},deleteAllMessages:function(){var e=this;this.$confirm("是否删除全部消息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.messages.forEach(function(e){t.push(e.messageId)}),e.$http.post("/MyCourses/deleteMessages",t).then(function(t){"SUCCESS"===t.data?(e.$message.success("成功删除全部消息!"),e.messages=[]):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})}).catch(function(){})},deleteMessage:function(e){var t=this;this.$http.post("/MyCourses/deleteMessages",[e]).then(function(s){"SUCCESS"===s.data?(t.messages=t.messages.filter(function(t){return t.messageId!==e}),t.$message.success("成功删除消息")):t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})},updateUserInfo:function(){var e=this;this.$http.post("/MyCourses/updateUserInfo",{userId:this.$cookies.get("userId"),name:this.editUserForm.name,studentId:""}).then(function(t){"SUCCESS"===t.data?(e.userInfo.map(function(t){return"姓名"===t.name&&(t.value=e.editUserForm.name),t}),e.isEditing=!1):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})},deleteAccount:function(){var e=this;this.$confirm("是否永久注销你的账号？此举动不会真正删除该账号的信息，而你将无法再使用该账号！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("/MyCourses/deleteAccount",e.$cookies.get("userId")).then(function(t){"SUCCESS"===t.data?(e.$message.success("成功永久注销你的账号!"),e.$cookies.remove("userId"),e.$cookies.remove("userType"),e.$router.push("/login")):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")})}).catch(function(){})},addReceiver:function(){this.newMessageForm.users.push({email:""})},addMessages:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;0===t.newMessageForm.classes.length&&0===t.newMessageForm.users.length?t.$message.error("发送消息至少要选择一个班级或收件人！"):t.$http.post("/MyCourses/addMessages",{senderId:t.userId,title:t.newMessageForm.title,message:t.newMessageForm.message,classes:t.newMessageForm.classes,users:t.newMessageForm.users}).then(function(e){if("SUCCESS"===e.data.result)t.newMessageDialogVisible=!1,t.$message.success("发送消息成功！");else if("NOT_EXIST"===e.data.result){t.newMessageDialogVisible=!1;var s="";e.data.failedEmails.forEach(function(e){s+=e+"<br />"}),t.$notify({title:"部分消息发送失败",message:"以下收件人邮箱不存在，对他们的消息未能成功发出，请再次检查：<br />"+s,type:"warning",duration:0})}else t.$message.error("网络错误，请刷新或稍后再试")},function(){t.$message.error("网络错误，请刷新或稍后再试")})})},removeUser:function(e){var t=this.newMessageForm.users.indexOf(e);-1!==t&&this.newMessageForm.users.splice(t,1)}}},$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("teacher-nav",{attrs:{name:e.name}})],1),e._v(" "),s("el-main",[s("el-row",[s("el-col",[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("账户信息\n            "),e.isEditing?s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:e.cancelEditUser}},[e._v("取消编辑")]):s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:e.editUser}},[e._v("编辑")])],1),e._v(" "),e._l(e.userInfo,function(t,a){return s("div",{key:a,staticClass:"text"},[s("label",[e._v(e._s(t.name)+":  ")]),e._v(" "),e.isEditing&&"姓名"===t.name?s("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.editUserForm.name,callback:function(t){e.$set(e.editUserForm,"name",t)},expression:"editUserForm.name"}}):s("span",[e._v(e._s(t.value))])],1)}),e._v(" "),e.isEditing?s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.updateUserInfo()}}},[e._v("保存修改")]):e._e()],2),e._v(" "),s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("消息\n            "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:e.deleteAllMessages}},[e._v("全部删除")])],1),e._v(" "),e._l(e.messages,function(t,a){return s("el-card",{key:a,staticClass:"message-card",attrs:{"body-style":{padding:"0px"}}},[s("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v("\n              "+e._s(t.title)+"\n              "),s("i",{staticClass:"el-icon-error deleteMessageIcon",staticStyle:{float:"right"},on:{click:function(s){e.deleteMessage(t.messageId)}}}),e._v(" "),s("span",{staticClass:"message-sender"},[e._v("发送者："+e._s(t.sender))])]),e._v(" "),s("div",{staticClass:"message-message"},[e._v(e._s(t.message))]),e._v(" "),s("div",{staticClass:"bottom"},[s("time",{staticClass:"time",attrs:{datetime:t.time}},[e._v(e._s(t.time[0])+"年"+e._s(t.time[1])+"月"+e._s(t.time[2])+"日 "+e._s(e.pre2(t.time[3]))+":"+e._s(e.pre2(t.time[4]))+":"+e._s(e.pre2(t.time[5])))])])])}),e._v(" "),s("el-button",{on:{click:function(t){e.newMessageDialogVisible=!0}}},[e._v("写新消息")])],2)],1),e._v(" "),s("el-col",[s("el-button",{on:{click:e.deleteAccount}},[e._v("注销账户")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"新的消息",visible:e.newMessageDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.newMessageDialogVisible=t}}},[s("el-form",{ref:"newMessageForm",attrs:{model:e.newMessageForm,"label-width":"75px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title",rules:{required:!0,message:"标题不能为空",trigger:"blur"}}},[s("el-input",{staticStyle:{float:"left"},attrs:{placeholder:"请输入标题"},model:{value:e.newMessageForm.title,callback:function(t){e.$set(e.newMessageForm,"title",t)},expression:"newMessageForm.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"群发班级",prop:"classes"}},[s("el-select",{attrs:{multiple:"",placeholder:"请选择群发班级"},model:{value:e.newMessageForm.classes,callback:function(t){e.$set(e.newMessageForm,"classes",t)},expression:"newMessageForm.classes"}},e._l(e.classes,function(e){return s("el-option",{key:e.classId,attrs:{value:e.classId,label:e.courseName+" "+e.startTime[0]+"年"+e.startTime[1]+"月"+e.startTime[2]+"日 "+e.classOrder+"班"}})}),1)],1),e._v(" "),e._l(e.newMessageForm.users,function(t,a){return s("el-form-item",{key:t.key,attrs:{label:"收件人"+(a+1),prop:"users."+a+".email",rules:{required:!0,message:"邮箱不能为空",trigger:"blur"}}},[s("el-input",{staticStyle:{width:"90%","margin-right":"10px"},attrs:{placeholder:"请输入收件人邮箱"},model:{value:t.email,callback:function(s){e.$set(t,"email",s)},expression:"user.email"}}),e._v(" "),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(s){s.preventDefault(),e.removeUser(t)}}})],1)}),e._v(" "),s("el-form-item",{attrs:{label:"正文",prop:"message",rules:{required:!0,message:"正文不能为空",trigger:"blur"}}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入正文"},model:{value:e.newMessageForm.message,callback:function(t){e.$set(e.newMessageForm,"message",t)},expression:"newMessageForm.message"}})],1)],2),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.newMessageDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{on:{click:e.addReceiver}},[e._v("新增收件人")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addMessages("newMessageForm")}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var F=s("VU/8")(S,$,!1,function(e){s("8fg3")},"data-v-2015a4cf",null).exports,M={name:"admin",mounted:function(){var e=this;this.$cookies.isKey("userId")?this.$http.get("/MyCourses/review",{params:{adminId:this.$cookies.get("userId")}}).then(function(t){"SUCCESS"===t.data.result?(e.checkNewCourse=t.data.checkNewCourse,e.checkNewClass=t.data.checkNewClass):e.$message.error("网络错误，请刷新或稍后再试")},function(){e.$message.error("网络错误，请刷新或稍后再试")}):this.$router.push("/login")},data:function(){return{name:this.$cookies.get("email"),checkNewCourse:[{courseId:1,grade:1,name:"课程1",teacher:"教师1"},{courseId:3,grade:1,name:"课程2",teacher:"教师1"},{courseId:2,grade:3,name:"课程3",teacher:"教师2"}],checkNewClass:[{classId:1,name:"课程1",teacher:"教师1",term:3,classOrder:1,startTime:[2019,3,1],endTime:[2019,6,30]},{classId:2,name:"课程2",teacher:"教师2",term:1,classOrder:1,startTime:[2019,3,1],endTime:[2019,6,30]},{classId:4,name:"课程2",teacher:"教师2",term:1,classOrder:2,startTime:[2019,3,1],endTime:[2019,7,7]}]}},methods:{clickPassCourse:function(e,t){var s=this;this.$http.post("/MyCourses/reviewCourse",{courseId:t.courseId,pass:!0}).then(function(t){"SUCCESS"===t.data?(s.$message.success("审批成功！"),s.checkNewCourse.splice(e,1)):s.$message.error("网络错误，请刷新或稍后再试")},function(){s.$message.error("网络错误，请刷新或稍后再试")})},clickRejectCourse:function(e,t){var s=this;this.$http.post("/MyCourses/reviewCourse",{courseId:t.courseId,pass:!1}).then(function(t){"SUCCESS"===t.data?(s.$message.success("拒绝成功！"),s.checkNewCourse.splice(e,1)):s.$message.error("网络错误，请刷新或稍后再试")},function(){s.$message.error("网络错误，请刷新或稍后再试")})},clickPassClass:function(e,t){var s=this;this.$http.post("/MyCourses/reviewClass",{classId:t.classId,pass:!0}).then(function(t){"SUCCESS"===t.data?(s.$message.success("审批成功！"),s.checkNewClass.splice(e,1)):s.$message.error("网络错误，请刷新或稍后再试")},function(){s.$message.error("网络错误，请刷新或稍后再试")})},clickRejectClass:function(e,t){var s=this;this.$http.post("/MyCourses/reviewClass",{classId:t.classId,pass:!1}).then(function(t){"SUCCESS"===t.data?(s.$message.success("拒绝成功！"),s.checkNewClass.splice(e,1)):s.$message.error("网络错误，请刷新或稍后再试")},function(){s.$message.error("网络错误，请刷新或稍后再试")})},startDateFormatter:function(e){return console.log(e.startTime),console.log(e.startTime.slice(0,3).join("-")),e.startTime.slice(0,3).join("-")},endDateFormatter:function(e){return e.endTime.slice(0,3).join("-")}}},T={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("admin-nav",{attrs:{name:e.name}})],1),e._v(" "),s("el-main",[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("创建新课程审核")]),e._v(" "),s("el-table",{attrs:{data:e.checkNewCourse,"default-sort":{prop:"name",order:"ascending"},"max-height":"450px",stripe:""}},[s("el-table-column",{attrs:{prop:"name",label:"课名",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"teacher",label:"教师",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"grade",label:"年级",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.clickPassCourse(t.$index,t.row)}}},[e._v("通过")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.clickRejectCourse(t.$index,t.row)}}},[e._v("不通过")])]}}])})],1)],1),e._v(" "),s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text",attrs:{slot:"header"},slot:"header"},[e._v("发布新课程审核")]),e._v(" "),s("el-table",{attrs:{data:e.checkNewClass,"default-sort":{prop:"name",order:"ascending"},"max-height":"450px",stripe:""}},[s("el-table-column",{attrs:{prop:"name",label:"课名",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"teacher",label:"教师",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"term",label:"学期",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"classOrder",label:"班级",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"startTime",label:"开课时间",formatter:e.startDateFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"endTime",label:"结课时间",formatter:e.endDateFormatter,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.clickPassClass(t.$index,t.row)}}},[e._v("通过")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.clickRejectClass(t.$index,t.row)}}},[e._v("不通过")])]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var E=s("VU/8")(M,T,!1,function(e){s("O9bV")},"data-v-650cfe2a",null).exports,U={name:"statistics",beforeCreate:function(){var e=this;this.$http.get("/MyCourses/statistics",{params:{adminId:this.$cookies.get("userId")}}).then(function(t){"SUCCESS"===t.data.result?(e.userPieChartOpinion=t.data.userPieChartOpinion,e.userPieChartSeries=t.data.userPieChartSeries,e.loginCountX=t.data.loginCountX,e.loginCountOpinion=t.data.loginCountOpinion,e.loginCountSeries=t.data.loginCountSeries):e.$message.error("网络错误，请刷新或稍后再试"),e.userPieChart.setOption({title:{text:"MyCourses 用户统计",subtext:"用户种类比例图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:e.userPieChartOpinion},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["pie","funnel"],option:{funnel:{x:"25%",width:"50%",funnelAlign:"left"}}},saveAsImage:{show:!0},restore:{show:!0}}},calculable:!0,series:[{name:"用户数量",type:"pie",radius:"55%",center:["50%","60%"],data:e.userPieChartSeries}]}),e.loginCount.setOption({title:{text:"MyCourses 每日登陆次数统计",subtext:"日活",x:"center"},tooltip:{trigger:"axis"},legend:{orient:"vertical",x:"left",data:e.loginCountOpinion},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},saveAsImage:{show:!0},restore:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:e.loginCountX}],yAxis:[{type:"value"}],series:[{name:"教师",type:"line",stack:"总量",itemStyle:{normal:{areaStyle:{type:"default"}}},data:e.loginCountSeries[0]},{name:"研究生",type:"line",stack:"总量",itemStyle:{normal:{areaStyle:{type:"default"}}},data:e.loginCountSeries[1]},{name:"本科生",type:"line",stack:"总量",itemStyle:{normal:{areaStyle:{type:"default"}}},data:e.loginCountSeries[2]}]})},function(){e.$message.error("网络错误，请刷新或稍后再试"),e.userPieChart.setOption(e.userPieChartOption),e.loginCount.setOption(e.loginCountOption)})},mounted:function(){var e=this;this.$cookies.isKey("userId")?this.$nextTick(function(){e.userPieChart=e.$echarts.init(document.getElementById("userPieChart")),e.loginCount=e.$echarts.init(document.getElementById("loginCount"))}):this.$router.push("/login")},data:function(){return{name:this.$cookies.get("email"),userPieChartOpinion:["教师","本科生","研究生"],userPieChartSeries:[{value:1024,name:"教师"},{value:4096,name:"本科生"},{value:2048,name:"研究生"}],loginCountX:["周一","周二","周三","周四","周五","周六","周日"],loginCountOpinion:["教师","本科生","研究生"],loginCountSeries:[[120,132,101,134,90,230,210],[220,182,191,234,290,330,310],[150,232,201,154,190,330,410]],userPieChartOption:{title:{text:"MyCourses 用户统计",subtext:"用户种类比例图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:["教师","本科生","研究生"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["pie","funnel"],option:{funnel:{x:"25%",width:"50%",funnelAlign:"left"}}},saveAsImage:{show:!0},restore:{show:!0}}},calculable:!0,series:[{name:"用户数量",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:1024,name:"教师"},{value:4096,name:"本科生"},{value:2048,name:"研究生"}]}]},loginCountOption:{title:{text:"MyCourses 每日登陆次数统计",subtext:"日活",x:"center"},tooltip:{trigger:"axis"},legend:{orient:"vertical",x:"left",data:this.loginCountOpinion},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},saveAsImage:{show:!0},restore:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"教师",type:"line",stack:"总量",itemStyle:{normal:{areaStyle:{type:"default"}}},data:[120,132,101,134,90,230,210]},{name:"研究生",type:"line",stack:"总量",itemStyle:{normal:{areaStyle:{type:"default"}}},data:[220,182,191,234,290,330,310]},{name:"本科生",type:"line",stack:"总量",itemStyle:{normal:{areaStyle:{type:"default"}}},data:[150,232,201,154,190,330,410]}]}}}},R={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",[t("admin-nav",{attrs:{name:this.name}})],1),this._v(" "),t("el-main",[t("div",{staticStyle:{width:"95%",height:"400px"},attrs:{id:"userPieChart"}}),this._v(" "),t("div",{staticStyle:{"margin-top":"40px",width:"95%",height:"400px"},attrs:{id:"loginCount"}})])],1)},staticRenderFns:[]};var N=s("VU/8")(U,R,!1,function(e){s("ygyF")},"data-v-44eadfb5",null).exports,O=s("zL8q"),V=s.n(O);s("tvR6");a.default.use(i.a),a.default.use(V.a);var H=new i.a({mode:"hash",routes:[{path:"/",name:"Home",component:m},{path:"/login",name:"LogIn",component:c},{path:"/MyClasses",name:"MyClasses",component:g},{path:"/TakeClasses",name:"TakeClasses",component:_},{path:"/MyInformation",name:"MyInformation",component:y},{path:"/TeacherCourses",name:"TeacherCourses",component:x},{path:"/TeacherInfo",name:"TeacherInfo",component:F},{path:"/review",name:"Review",component:E},{path:"/statistics",name:"Statistics",component:N}]}),P=s("8+8L"),L=s("ppUw"),D=s.n(L),A={name:"StudentNav",props:{name:String},data:function(){return{navList:[{name:"/MyClasses",navItem:"我的课程"},{name:"/TakeClasses",navItem:"选课"},{name:"/MyInformation",navItem:"个人信息"}]}},methods:{handleCommand:function(e){"homepage"===e?this.$router.push("/"):"logout"===e&&(this.$cookies.remove("userId"),this.$cookies.remove("userType"),this.$router.push("/login"))}}},z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-menu",{attrs:{"default-active":this.$route.path,router:"",mode:"horizontal"}},[e._l(e.navList,function(t,a){return s("el-menu-item",{key:a,attrs:{index:t.name}},[e._v("\n    "+e._s(t.navItem)+"\n  ")])}),e._v(" "),s("el-dropdown",{staticClass:"user",on:{command:e.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[e._v(e._s(e.name)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"homepage"}},[e._v("主页")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("退出登录")])],1)],1)],2)},staticRenderFns:[]};var j=s("VU/8")(A,z,!1,function(e){s("rNOQ")},"data-v-7b0de548",null).exports,Y={name:"TeacherNav",props:{name:String},data:function(){return{navList:[{name:"/TeacherCourses",navItem:"我的课程"},{name:"/TeacherInfo",navItem:"个人信息"}]}},methods:{handleCommand:function(e){"homepage"===e?this.$router.push("/"):"logout"===e&&(this.$cookies.remove("userId"),this.$cookies.remove("userType"),this.$router.push("/login"))}}},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-menu",{attrs:{"default-active":this.$route.path,router:"",mode:"horizontal"}},[e._l(e.navList,function(t,a){return s("el-menu-item",{key:a,attrs:{index:t.name}},[e._v("\n    "+e._s(t.navItem)+"\n  ")])}),e._v(" "),s("el-dropdown",{staticClass:"user",on:{command:e.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[e._v(e._s(e.name)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"homepage"}},[e._v("主页")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("退出登录")])],1)],1)],2)},staticRenderFns:[]};var B=s("VU/8")(Y,q,!1,function(e){s("OUCG")},"data-v-d0702e90",null).exports,X={name:"AdminNav",props:{name:String},data:function(){return{navList:[{name:"/review",navItem:"审核课程"},{name:"/statistics",navItem:"信息统计"}]}},methods:{handleCommand:function(e){"homepage"===e?this.$router.push("/"):"logout"===e&&(this.$cookies.remove("userId"),this.$cookies.remove("userType"),this.$router.push("/login"))}}},Q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-menu",{attrs:{"default-active":this.$route.path,router:"",mode:"horizontal"}},[e._l(e.navList,function(t,a){return s("el-menu-item",{key:a,attrs:{index:t.name}},[e._v("\n    "+e._s(t.navItem)+"\n  ")])}),e._v(" "),s("el-dropdown",{staticClass:"user",on:{command:e.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[e._v(e._s(e.name)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"homepage"}},[e._v("主页")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("退出登录")])],1)],1)],2)},staticRenderFns:[]};var K=s("VU/8")(X,Q,!1,function(e){s("f6Tp")},"data-v-fbc344be",null).exports,G=s("ARhN"),J=s.n(G),Z=s("dyVb"),W=s.n(Z);a.default.use(D.a),a.default.use(P.a),a.default.component("StudentNav",j),a.default.component("TeacherNav",B),a.default.component("AdminNav",K),a.default.prototype.$echarts=J.a,a.default.prototype.$XLSX=W.a,a.default.config.productionTip=!1,new a.default({el:"#app",router:H,components:{App:o},template:"<App/>"})},O9bV:function(e,t){},OUCG:function(e,t){},RmUS:function(e,t){},br41:function(e,t){},f6Tp:function(e,t){},g8QD:function(e,t){},h8hd:function(e,t){},rNOQ:function(e,t){},tvR6:function(e,t){},ygyF:function(e,t){},yxo9:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.abd761c42a9cfb978a60.js.map